{"ast":null,"code":"import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nconst DEFAULT_OPTIONS = {\n  numberOfChannels: 1\n};\nexport const createOfflineAudioContextConstructor = (baseAudioContextConstructor, cacheTestResult, createInvalidStateError, createNativeOfflineAudioContext, startRendering) => {\n  return class OfflineAudioContext extends baseAudioContextConstructor {\n    constructor(a, b, c) {\n      let options;\n      if (typeof a === 'number' && b !== undefined && c !== undefined) {\n        options = {\n          length: b,\n          numberOfChannels: a,\n          sampleRate: c\n        };\n      } else if (typeof a === 'object') {\n        options = a;\n      } else {\n        throw new Error('The given parameters are not valid.');\n      }\n      const {\n        length,\n        numberOfChannels,\n        sampleRate\n      } = {\n        ...DEFAULT_OPTIONS,\n        ...options\n      };\n      const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n      // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n      if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n        nativeOfflineAudioContext.addEventListener('statechange', (() => {\n          let i = 0;\n          const delayStateChangeEvent = event => {\n            if (this._state === 'running') {\n              if (i > 0) {\n                nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                event.stopImmediatePropagation();\n                this._waitForThePromiseToSettle(event);\n              } else {\n                i += 1;\n              }\n            }\n          };\n          return delayStateChangeEvent;\n        })());\n      }\n      super(nativeOfflineAudioContext, numberOfChannels);\n      this._length = length;\n      this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n      this._state = null;\n    }\n    get length() {\n      // Bug #17: Safari does not yet expose the length.\n      if (this._nativeOfflineAudioContext.length === undefined) {\n        return this._length;\n      }\n      return this._nativeOfflineAudioContext.length;\n    }\n    get state() {\n      return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n    }\n    startRendering() {\n      /*\n       * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n       * the state of the nativeOfflineAudioContext might no transition to running immediately.\n       */\n      if (this._state === 'running') {\n        return Promise.reject(createInvalidStateError());\n      }\n      this._state = 'running';\n      return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n        this._state = null;\n        deactivateAudioGraph(this);\n      });\n    }\n    _waitForThePromiseToSettle(event) {\n      if (this._state === null) {\n        this._nativeOfflineAudioContext.dispatchEvent(event);\n      } else {\n        setTimeout(() => this._waitForThePromiseToSettle(event));\n      }\n    }\n  };\n};","map":{"version":3,"names":["deactivateAudioGraph","testPromiseSupport","DEFAULT_OPTIONS","numberOfChannels","createOfflineAudioContextConstructor","baseAudioContextConstructor","cacheTestResult","createInvalidStateError","createNativeOfflineAudioContext","startRendering","OfflineAudioContext","constructor","a","b","c","options","undefined","length","sampleRate","Error","nativeOfflineAudioContext","addEventListener","i","delayStateChangeEvent","event","_state","removeEventListener","stopImmediatePropagation","_waitForThePromiseToSettle","_length","_nativeOfflineAudioContext","state","Promise","reject","destination","finally","dispatchEvent","setTimeout"],"sources":["C:/Users/Santosh Lade/Desktop/MERN App/client/node_modules/standardized-audio-context/build/es2019/factories/offline-audio-context-constructor.js"],"sourcesContent":["import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n};\nexport const createOfflineAudioContextConstructor = (baseAudioContextConstructor, cacheTestResult, createInvalidStateError, createNativeOfflineAudioContext, startRendering) => {\n    return class OfflineAudioContext extends baseAudioContextConstructor {\n        constructor(a, b, c) {\n            let options;\n            if (typeof a === 'number' && b !== undefined && c !== undefined) {\n                options = { length: b, numberOfChannels: a, sampleRate: c };\n            }\n            else if (typeof a === 'object') {\n                options = a;\n            }\n            else {\n                throw new Error('The given parameters are not valid.');\n            }\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener('statechange', (() => {\n                    let i = 0;\n                    const delayStateChangeEvent = (event) => {\n                        if (this._state === 'running') {\n                            if (i > 0) {\n                                nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                event.stopImmediatePropagation();\n                                this._waitForThePromiseToSettle(event);\n                            }\n                            else {\n                                i += 1;\n                            }\n                        }\n                    };\n                    return delayStateChangeEvent;\n                })());\n            }\n            super(nativeOfflineAudioContext, numberOfChannels);\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n        get length() {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n            return this._nativeOfflineAudioContext.length;\n        }\n        get state() {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n        startRendering() {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n            this._state = 'running';\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n                deactivateAudioGraph(this);\n            });\n        }\n        _waitForThePromiseToSettle(event) {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            }\n            else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n//# sourceMappingURL=offline-audio-context-constructor.js.map"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}